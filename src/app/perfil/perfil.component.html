<div class="container datos_perfil">

    <div class="row">

        <div class="col-md-4 text-center">


            <div class="con">
                <img src="{{photo_profile}}" alt="Cinque Terre" class="img_hover_file">
                <div class="overlay" (click)="fileInput.click()">
                    <a  class="icon" >
                      <i>Actualizar Imagen</i>
                    </a>
                </div>

              </div>

            <div class="nombre_perfil">
                <p class="text-uppercase">{{name_profile}}</p>
            </div>
            <p  *ngIf="_message_img"  class="text-center " style="padding: 5px;color: green;font-size: 1em">
                {{message_text_img}}
            </p>
            <input type="file"  #fileInput (change)="detectFiles($event)" hidden accept="image/jpeg,image/png" >
            <button  class="btn btn ds" [disabled]="!selectedFiles" (click)="uploadSingle()">SUBIR FOTO</button>





            <div class="nav flex-column nav-pills text-center" id="v-pills-tab" role="tablist" aria-orientation="vertical" style="margin-bottom: 10px;"><br>
               <a class="nav-link active" id="v-pills-home-tab" data-toggle="pill" href="#v-pills-home" role="tab" aria-controls="v-pills-home" aria-selected="true"><i class="fas fa-align-justify"></i>MIS DATOS</a>
                <a *ngIf="!typeUser" class="nav-link" id="v-pills-profile-tab" data-toggle="pill" href="#v-pills-profile" role="tab" aria-controls="v-pills-profile" aria-selected="false"><i class="far fa-user"></i>MI CONTRASEÑA</a>
                <a class="nav-link" id="v-pills-messages-tab" data-toggle="pill" href="#v-pills-messages" role="tab" aria-controls="v-pills-messages" aria-selected="false"><i class="fab fa-telegram-plane"></i>MIS SOLICITUDES</a>
                <a class="nav-link" id="v-pills-settings-tab" data-toggle="pill" href="#v-pills-settings" role="tab" aria-controls="v-pills-settings" aria-selected="false"><i class="fas fa-home"></i>MIS INMUEBLES</a>
            </div>



        </div>
        <div class="col-md-8">

            <div class="tab-content perfil_tab" id="v-pills-tabContent">
                <div class="tab-pane fade show active" id="v-pills-home" role="tabpanel" aria-labelledby="v-pills-home-tab">
                    <h3>MIS DATOS</h3>
                    <div class="linea"></div>

                    <form  #formPerfil="ngForm" (submit)="onUpdatePerfilUser()">
                        <div class="form-group row">

                            <label for="nombre_p" class="col-sm-3 col-form-label ">Nombres:</label>
                            <div class="col-sm-7">

                                <input
                                type="text"
                                #nameProfile_="ngModel"
                                [(ngModel)]="modelProfile.nameProfile"
                                name="nameProfile"
                                class="form-control input_login"
                                placeholder="Nombre"
                                minlength="4"
                                pattern="[a-zA-Z ]*"
                                required
                                (keypress)="onlyText($event)">

                            <div *ngIf="nameProfile_.invalid && (nameProfile_.dirty || nameProfile_.touched)" class="validif">

                                        <div *ngIf="nameProfile_.errors.required">
                                          Nombre es requerido*
                                        </div>
                                        <div *ngIf="nameProfile_.errors.minlength">
                                          Nombre debe ser mayor a 4 digitos*
                                        </div>
                                        <div *ngIf="nameProfile_.errors.pattern">
                                          Nombre debe contener solo letras*
                                        </div>

                            </div>

                          </div>



                        </div>

                        <div class="form-group row">
                            <label for="email_p" class="col-sm-3 col-form-label ">E-mail:  </label>
                            <div class="col-sm-7">
                                <input
                                type="email"
                                disabled
                                class="form-control input_login"
                                name="email"
                                [(ngModel)]="modelProfile.email"
                                placeholder="E-mail"
                                required>
                            </div>
                        </div>

                        <div class="form-group row">
                            <label for="celular_p" class="col-sm-3 col-form-label ">Teléfono:  </label>
                            <div class="col-sm-7">

                                <input
                                 type="text"
                                 class="form-control input_login"
                                 name="phoneNumber"
                                 [(ngModel)]="modelProfile.phoneNumber"
                                 #phoneNumber_="ngModel"
                                 pattern="[0-9]*"
                                 placeholder="Teléfono"
                                 minlength="9"
                                 maxlength="9"
                                 required
                                 (keypress)="onlyNumber($event)">

                            <div *ngIf="phoneNumber_.invalid && (phoneNumber_.dirty || phoneNumber_.touched)" class="validif">

                               <div *ngIf="phoneNumber_.errors.minlength || phoneNumber_.errors.maxlength">
                                 Telefono debe contener 9 digitos*
                               </div>
                               <div *ngIf="phoneNumber_.errors.pattern">
                                Telefono debe contener solo numeros*
                               </div>
                               <div *ngIf="phoneNumber_.errors.required">
                                  Telefono es requerido*
                               </div>

                             </div>

                          </div>
                        </div>

                        <div class="text-center">
                            <button type="submit" class="btn bg-blul" [disabled] = "!formPerfil.valid">Guardar</button>
                        </div>

                    </form>

                    <p  *ngIf="_message_perfil"  class="text-center " style="padding: 5px;background-color: green;color: white;font-size: 1em">
                      {{message_text_perfil}}
                   </p>



                </div>
                <div class="tab-pane fade" id="v-pills-profile" role="tabpanel" aria-labelledby="v-pills-profile-tab">
                    <h3>MI CONTRASEÑA</h3>
                    <div class="linea"></div>

                    <form #formPerfilContrasena="ngForm" (submit)="onUpdatePassword(formPerfilContrasena)" [mustMatch]="['passwordNew', 'passwordConfirm']" >
                        <div class="form-group row">

                            <label for="password" class="col-sm-4 col-form-label ">Contraseña actual:</label>
                            <div class="col-sm-6">

                                <input
                                type="email"
                                disabled
                                class="form-control input_login"
                                name="email"
                                [(ngModel)]="modelPassword.email"
                                placeholder="E-mail"
                                required
                                hidden>

                                <input
                                type="password"
                                class="form-control input_login"
                                name="password"
                                [(ngModel)]="modelPassword.password"
                                #password_="ngModel"
                                required appPassword>

                                <div *ngIf="password_.invalid && (password_.dirty || password_.touched)"  class="validif">
                                    <div *ngIf="password_.errors.required">Contraseña nueva es requerido*</div>
                                </div>
                            </div>
                        </div>


                        <div class="form-group row">
                            <label for="passwordNew" class="col-sm-4 col-form-label ">Contraseña nueva:</label>
                            <div class="col-sm-6">
                                <input
                                type="password"
                                class="form-control input_login"
                                name="passwordNew"
                                #passwordNew_="ngModel"
                                [(ngModel)]="modelPassword.passwordNew"
                                required
                                minlength="6" appPassword>

                                <div *ngIf="passwordNew_.invalid && (passwordNew_.dirty || passwordNew_.touched)" class="validif">
                                    <div *ngIf="passwordNew_.errors.required">Contraseña es requerido*</div>
                                    <div *ngIf="passwordNew_.errors.minlength">Contraseña debe ser mayor a 6 digitos*</div>
                                </div>

                            </div>
                        </div>
                        <div class="form-group row">
                            <label for="passwordConfirm" class="col-sm-4 col-form-label ">Confirmar contraseña:</label>
                            <div class="col-sm-6">
                                <input
                                type="password"
                                class="form-control input_login"
                                name="passwordConfirm"
                                #passwordConfirm_="ngModel"
                                [(ngModel)]="modelPassword.passwordConfirm"
                                required appPassword>

                                <div *ngIf="passwordConfirm_.invalid && (passwordConfirm_.dirty || passwordConfirm_.touched)" class="validif" >
                                    <div *ngIf="passwordConfirm_.errors.required">Confirmar contraseña nueva es requerido*</div>
                                    <div *ngIf="passwordConfirm_.errors.mustMatch">Contraseñas no coinciden*</div>
                                </div>

                            </div>
                        </div>


                        <div class="text-center">

                            <button type="submit" class="btn bg-blul" [disabled] = "!formPerfilContrasena.valid" >Actualizar contraseña</button>
                        </div>
                    </form>



                   <p *ngIf="message_c_valid" [ngClass]="{'mesage_valid':error.message === 'success','mesage_invalid':error.message === 'error'}"  class="text-center" >
                      {{message_text_contra}}
                   </p>



                </div>
                <div class="tab-pane fade" id="v-pills-messages" role="tabpanel" aria-labelledby="v-pills-messages-tab">
                    <h3>MIS SOLICITUDES</h3>
                    <a class="btn nuevo_i" (click)="redireccionar('registro-solicitud')">NUEVA SOLICITUD</a>
                    <div class="linea"></div>

                    <div class="col-sm-12 scroll_s">

                      <div *ngFor="let item of solicitudata | paginate: { itemsPerPage: 3, currentPage: p } ">
                        <br><br>
                        <div  class="col-12">
                          <div class="botones_funcionales">

                              <a  >Editar</a>
                              <a >Eliminar</a>
                          </div>
                        </div>
                          <div class="item row">

                              <div class="col-sm-4 padding" *ngIf="item.radio.length > 0">
                                  <agm-map [latitude]="item.radio[0].lat" [longitude]="item.radio[0].lng" [zoom]="13" >
                                      <agm-circle *ngFor="let m of item.radio" [latitude]="m.lat" [longitude]="m.lng"
                                     [radius]="500"
                                     [fillColor]="m.color">
                                     </agm-circle>
                                  </agm-map>
                              </div>
                              <div class="col-sm-4 padding" *ngIf="item.radio.length === 0">
                                  <agm-map [latitude]="-12.114090" [longitude]="-77.027842" [zoom]="13" >
                                  </agm-map>
                              </div>


                              <div class="col-sm-8  padding">
                                  <div class="maps-renta row" style="margin:0px">

                                          <div class="col-6 margin_p text-left " >
                                              <div class="name-busca "><i class="fas fa-user"></i>ESTÁS BUSCANDO:</div>
                                          </div>
                                          <div class="col-6 margin_p text-right " >
                                              <div class="estados">{{item.operacion}}</div>
                                          </div>
                                          <div class="col-12 margin_p text-right" *ngIf="item.distrito.length>0" >
                                              <div class="d-inline-flex" *ngFor="let m of item.distrito" > {{m.nombre}} - </div><i class="fas fa-map-marker-alt"></i>
                                          </div>
                                          <div class="col-12 margin_p text-right" *ngIf="item.distrito.length===0" >
                                              <div class="d-inline-flex">Seleccion por Area     <i class="fas fa-map-marker-alt"></i></div>
                                          </div>

                                          <div class="col-12 margin_p"  >
                                            <div class="row" style="margin:0px">
                                              <div class="col-6 " style="padding-left: 0px;padding-right: 5px">
                                                <div class="border_s">
                                                    <i class="fas fa-home"></i><span class="text-right" >{{item.tipo_departamento}}</span>
                                              </div>
                                            </div>
                                              <div class="col-6 " style="padding-right: 0px;padding-left: 5px">
                                                <div class="border_s">
                                                <i class="fas fa-bed"></i><span class="text-right" >{{item.cuartos}} DORMITORIOS</span>
                                              </div>
                                              </div>
                                            </div>
                                          </div >
                                          <br>
                                          <div class="col-12 margin_p_10"  >
                                              <div class="row" style="margin:0px">

                                                <div class="col-3" style="padding-left: 0px">
                                                  <div class="border_s"><i class="fab fa-medium"></i><span class="text-right" >{{item.area}} M²</span>
                                                  </div>
                                                </div>

                                                <div class="col-4 " style="padding-left: 0px;padding-right: 0px">
                                                  <div class="border_s"><i class="fas fa-toilet"></i><span class="text-right" >{{item.bano}} BAÑOS</span>
                                                  </div>
                                                </div>

                                                <div class="col-5" style="padding-right: 0px">
                                                  <div class="border_s"><i class="fas fa-dollar-sign"></i><span class="text-right" >{{item.presupuesto.precio}} {{item.presupuesto.moneda}}</span>
                                                  </div>
                                                </div>
                                              </div>
                                            </div>



                                  </div>
                              </div>
                          </div>

                      </div>
 <br>
                      <div class="col-12 text-center" >
                        <pagination-controls
                       (pageChange)="p = $event"
                       previousLabel="<"
                       nextLabel=">"
                       >
                      </pagination-controls>
                    </div>

                    </div>
                </div>
                <div class="tab-pane fade" id="v-pills-settings" role="tabpanel" aria-labelledby="v-pills-settings-tab">
                    <h3>MIS INMUEBLES</h3>
                    <a class="btn nuevo_i" (click)="redireccionar('registro-inmueble')">NUEVO INMUEBLE</a>
                    <div class="linea"></div>

                    <div class="col-sm-12 ">

                      <!-- <div *ngIf="_rentalPublications != null && _rentalPublications.length > 0" class="col-sm-12"> -->
                      <div *ngFor="let item of data ">
                        <br><br>
                        <div  class="col-12">
                          <div class="botones_funcionales">

                              <a  (click)="editarInmueble(item.id_inmueble)">Editar</a>
                              <a (click)="eliminarInmueble(item.id_inmueble)" >Eliminar</a>
                          </div>
                        </div>
                          <div class="item row">

                              <div class="col-sm-4 padding">

                              <img [src]="this.img" class="img-fluid foto_normal">


                              </div>
                              <div class="col-sm-8  padding">
                                  <div class="maps-renta row" style="margin:0px">

                                          <div class="col-6 margin_p text-left " >
                                              <div class="name-busca "><i class="fas fa-user"></i> ESTAS OFRECIENDO:</div>
                                          </div>
                                          <div class="col-6 margin_p text-right " >
                                              <div class="estados">{{item.operacion}}</div>
                                          </div>
                                          <div class="col-12 margin_p text-right">
                                              <div class="">{{item.provincia}} / {{item.distrito}} <i class="fas fa-map-marker-alt"></i></div>
                                          </div>

                                          <div class="col-12 margin_p"  >
                                            <div class="row" style="margin:0px">
                                              <div class="col-6 " style="padding-left: 0px;padding-right: 5px">
                                                <div class="border_s">
                                                    <i class="fas fa-home"></i><span class="text-right" >{{item.tipo_departamento}}</span>
                                              </div>
                                            </div>
                                              <div class="col-6 " style="padding-right: 0px;padding-left: 5px">
                                                <div class="border_s">
                                                <i class="fas fa-bed"></i><span class="text-right" >{{item.cuartos}} DORMITORIOS</span>
                                              </div>
                                              </div>
                                            </div>
                                          </div >
                                          <br>
                                          <div class="col-12 margin_p_10"  >
                                              <div class="row" style="margin:0px">

                                                <div class="col-3" style="padding-left: 0px">
                                                  <div class="border_s"><i class="fab fa-medium"></i><span class="text-right" >{{item.area}} M²</span>
                                                  </div>
                                                </div>

                                                <div class="col-4 " style="padding-left: 0px;padding-right: 0px">
                                                  <div class="border_s"><i class="fas fa-toilet"></i><span class="text-right" >{{item.bano}} BAÑOS</span>
                                                  </div>
                                                </div>

                                                <div class="col-5" style="padding-right: 0px">
                                                  <div class="border_s"><i class="fas fa-dollar-sign"></i><span class="text-right" >{{item.presupuesto.precio}} {{item.presupuesto.moneda}}</span>
                                                  </div>
                                                </div>
                                              </div>
                                            </div>



                                  </div>
                              </div>
                          </div>

                      </div>

                  </div>
                </div>
            </div>


        </div>

    </div>

</div>
